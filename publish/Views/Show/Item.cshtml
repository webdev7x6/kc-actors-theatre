@model KCActorsTheatre.Web.ViewModels.ShowViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";

    var mainImageUrl = string.IsNullOrEmpty(Model.Show.MainImageUrl) ? "http://placehold.it/1200x500" : Model.Show.MainImageUrl;
}

@section styles
{
    <link href="/common/css/nivo-lightbox.min.css" rel="stylesheet" type="text/css" media="all"/>
    <link href="/common/css/themes/default/default.min.css" rel="stylesheet" type="text/css" media="all"/>
}

@section scripts
{
    <script type="text/javascript">
        $(function() {
            var videoIds = '@string.Join(",", Model.VideoIds.Select(n => n.ToString()).ToArray())';
            videoIds.split(',').forEach(function (id) {
                $.ajax({
                    url: 'http://vimeo.com/api/v2/video/' + id + '.json',
                    success: function(data) {
                        console.log(data[0]);

                        $('.show-videos').append('<div><a href="http://vimeo.com/' + id + '" data-lightbox-gallery="gallery2"><img src="' + data[0].thumbnail_medium + '" class="show-thumbnails"></a></div>');

                    }
                });
            });


            //$('.show-videos').on('click', 'a', function(e) {
            //    e.preventDefault();
            //    var id = $(this).attr('data-id');
            //    $('body').append($('#VideoModalTemplate').html().split('{{video-id}}').join(id));
            //    $('#VideoModal').modal();
            //    $('#VideoModal').on('hidden.bs.modal', function(e) {
            //        $('#VideoModal').remove();
            //    });
            //});
        });
    </script>
    
    @*<script id="VideoModalTemplate" type="text/html-template">
        <div id="VideoModal" class="modal fade">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Modal title</h4>
              </div>
              <div class="modal-body" style="text-align:center;">
                <iframe src="//player.vimeo.com/video/{{video-id}}?byline=0&amp;portrait=0&amp;badge=0&amp;color=f00004&amp;autoplay=1" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
    </script>*@
}

<div class="inner-page-img">
    <img src="@mainImageUrl" alt="">
</div>
<div class="container inner-page-with-image">
  <div class="row header-row">
	  <div class="col-xs-12">
	    <h1>@Model.Show.Title</h1>
	  </div>
	</div>
	<div class="row">
	  <div class="col-md-9 col-sm-12" id="main-content">
	      <div class="row show-detail-item visible-xs">
	      <div class="col-sm-12">
	        <button class="btn btn-default btn-block btn-buy">Buy Tickets</button>
	      </div>
	      </div>
          <div class="row show-detail-item">
	      <div class="col-sm-12">
	        <h2>Synopsis</h2>
    		  @Html.Raw(Model.Show.Body)
	      </div>
	    </div>
	    @*<div class="row show-detail-item">
	      <div class="col-sm-12">
	        <h2>Photos</h2>
    		  <div class="slider responsive">
  					<div><a href="#"><img src="../common/img/show-img.jpg" class="show-thumbnails"></a></div>
  					<div><a href="#"><img src="../common/img/show-img-2.jpg" class="show-thumbnails"></a></div>
  					<div><a href="#"><img src="../common/img/show-img.jpg" class="show-thumbnails"></a></div>
  					<div><a href="#"><img src="../common/img/show-img-2.jpg" class="show-thumbnails"></a></div>
  				</div>
	      </div>
	    </div>*@
	    <div class="row show-detail-item">
	      <div class="col-sm-12">
	        <h2>Videos</h2>
    		  <div class="slider responsive show-videos">
  					@*<div><a href="#" data-id="77508455"><img src="http://i.vimeocdn.com/video/453056675_200x150.jpg" class="show-thumbnails" style="background:black;"></a></div>
  					<div><a href="#" data-id="20834820"><img src="http://i.vimeocdn.com/video/133522364_200x150.jpg" class="show-thumbnails" style="background:black;"></a></div>
  					<div><a href="#" data-id="78497306"><img src="http://i.vimeocdn.com/video/453911534_200x150.jpg" class="show-thumbnails" style="background:black;"></a></div>*@
  				</div>
	      </div>
	    </div>
	    <div class="row show-detail-item">
	      <div class="col-sm-12">
	        <h2>Cast</h2>
    		  <ul id="cast">
		          @foreach (var person in @Model.Show.People)
		          {
                    <li><span class="role">@person.Title:</span> <a href="#">@person.Name</a></li>
		          }
    		  </ul>
	      </div>
	    </div>
	    <div class="row show-detail-item">
	      <div class="col-sm-12">
	        <h2>Reviews</h2>
    		@Html.Raw(Model.Show.Reviews)
	      </div>
	    </div>
	    <div class="row show-detail-item">
	      <div class="col-sm-12">
	        <h2>Education</h2>
	        @Html.Raw(Model.Show.Education)
	      </div>
	    </div>
	    <div class="row show-detail-item">
	      <div class="col-sm-12">
	        <h2>Music</h2>
	        <ul class="mp3-links">
	            <li><a href="#"><span class="glyphicon glyphicon-music"></span>Name of the Song</a></li>
	            <li><a href="#"><span class="glyphicon glyphicon-music"></span>Name of the Song</a></li>
	            <li><a href="#"><span class="glyphicon glyphicon-music"></span>Name of the Song</a></li>
                <li><a href="#"><span class="glyphicon glyphicon-music"></span>Name of the Song</a></li>
                <li><a href="#"><span class="glyphicon glyphicon-music"></span>Name of the Song</a></li>
	        </ul>
	      </div>
	    </div>
	  </div> <!-- Close main-content -->
	  <div class="col-md-3 col-sm-12" id="sidebar">
	    <div class="row show-sidebar-item hidden-xs">
	      <div class="col-sm-12">
	        <button class="btn btn-default btn-block btn-buy">Buy Tickets</button>
	      </div>
	    </div>
	    <div class="row show-sidebar-item">
	      <div class="col-sm-12">
	        <h2>Dates &amp; Times</h2>
    		  @Html.Raw(Model.Show.DatesAndTimes)
	      </div>
	    </div>
	      <div class="row show-sidebar-item">
	          <div class="col-sm-12">
	              <h2>Venue</h2>
	              @Html.Raw(Model.Show.Venue)
	          </div>
	      </div>
          @if (Model.Show.Season != null)
          {
              <div class="row show-sidebar-item">
                  <div class="col-sm-12">
                      <h2>More From @Model.Show.Season.Title</h2>
                  </div>
              </div>
          }
	  </div>
	</div>
</div>

