@using Clickfarm.AppFramework.Extensions;
@using Clickfarm.Cms.Configuration
@using Clickfarm.Cms.Core
@using Clickfarm.Cms.Mvc
@using KCActorsTheatre.Cms.ContentTypes
@model Clickfarm.Cms.Admin.Mvc.Areas.Admin.ViewModels.ContentGroupMemberViewModel
@{ 
    
    ContentWidgetContent content = (ContentWidgetContent)Model.Content;
    ContentTypeConfigData config = Model.ContentTypeConfigData;

    var fileDocProps = ContentProperties.Empty;
    if (config.Properties.ContainsKey("FileDocumentContentProperties"))
    {
        fileDocProps = config.Properties["FileDocumentContentProperties"];
    }

    var fileImgProps = ContentProperties.Empty;
    if (config.Properties.ContainsKey("FileImageContentProperties"))
    {
        fileImgProps = config.Properties["FileImageContentProperties"];
    }

    ImageContentProperties imgProps = null;
    string imageLabel = "{0} x {1} (Width x Height)";
    if (config.Properties.ContainsKey("ImageContentProperties"))
    {
        imgProps = (ImageContentProperties)config.Properties["ImageContentProperties"];
        imageLabel = string.Format(imageLabel, imgProps.ExactWidth, imgProps.ExactHeight);
    }

    string target = null;
    if (content.Target != null)
    {
        HyperlinkContent.LinkTargets.TryGetPropertyValue<string>(content.Target, out target);
    }
}

<label>Display Order:</label>
<span style="font-style: italic">Enter a number for the display order.</span>
<div class="display-field editable-format editable nullable" data-property-name="DisplayOrder">@content.DisplayOrder</div>

<label>Title:</label>
<span style="font-style: italic">Maximum length is 50 characters.</span>
<div class="display-field editable-format editable nullable" data-property-name="Title">@content.Title</div>

<label>Text:</label>
<span style="font-style: italic">Maximum length is 150 characters.</span>
<div class="display-field editable-format editable-textarea nullable" data-property-name="Text">@content.Text</div>

<label>Image:</label>
<span style="font-style: italic">@imageLabel</span>
<div class="display-field editable-format editable-image nullable" data-content-file-properties="@fileImgProps.ToJson()" data-content-image-properties="@imgProps.ToJson()" data-property-name="ImageUrl">
    @if (!string.IsNullOrWhiteSpace(content.ImageUrl))
    {
        <img src="@content.ImageUrl" alt="" />
    }
</div>

<label>Link Text:</label>
<div class="display-field editable-format editable nullable" data-property-name="LinkText">@content.LinkText</div>

<label>Link Target:</label>
<div class="display-field editable-format editable-select editable-select-target" data-editable-select-model="target" data-editable-select-data="@HyperlinkContent.LinkTargetsJson" data-property-name="Target">@target</div>

<label>Link URL:</label>
<div class="display-field editable-format editable-hyperlink nullable" data-content-file-properties="@fileDocProps.ToJson()" data-property-name="LinkUrl">@content.LinkUrl</div>